!function(){function t(e){var t=parseInt(e),i=t%60;return i<10&&(i="0"+i),Math.floor(t/60)+":"+i}this.CinemaInit=function(e,t){document.querySelectorAll(e).forEach(function(e){if("video"==e.tagName.toLowerCase()||"audio"==e.tagName.toLowerCase())return new Cinema(e,t);console.warn("You tried to create a Cinema object with something other than a <video> or <audio> element. The specific element is logged below:"),console.warn(e)})},this.Cinema=function(e,t){this.media=e,this.settings=function e(t,i){for(property in i)i.hasOwnProperty(property)&&("object"==typeof i[property]?t[property]=e(t[property],i[property]):t[property]=i[property]);return t}({autoplay:!1,volume:1,display:{fullScreenBtn:!0,times:!0,progressBar:!0,volumeBar:!0},animate:{toolbar:!0,volumeBar:!0}},t),this.state={playing:!this.settings.autoplay,fullScreen:!1},this.render()},Cinema.prototype.render=function(){this.media.className="cinema-media",this.media.addEventListener("click",this.playPause.bind(this)),this.media.addEventListener("timeupdate",this.mediaPlaying.bind(this)),this.media.addEventListener("ended",this.mediaEndUpdate.bind(this)),this.media.addEventListener("progress",this.bufferUpdate.bind(this)),this.container=document.createElement("div"),this.container.className="cinema-container",this.media.parentNode.insertBefore(this.container,this.media.nextSibling),this.container.appendChild(this.media),this.settings.animate.toolbar&&(this.container.addEventListener("mouseover",this.mediaMouseover.bind(this)),this.container.addEventListener("mouseout",this.mediaMouseout.bind(this))),this.toolbar=document.createElement("div"),this.toolbar.className="cinema-toolbar",this.settings.animate.toolbar||this.toolbar.classList.add("cinema-toolbar-active"),this.container.appendChild(this.toolbar),this.leftToolbar=document.createElement("div"),this.leftToolbar.className="cinema-toolbar-left",this.toolbar.appendChild(this.leftToolbar),this.rightToolbar=document.createElement("div"),this.rightToolbar.className="cinema-toolbar-right",this.toolbar.appendChild(this.rightToolbar),this.playBtn=document.createElement("button"),this.playBtn.className="cinema-btn cinema-btn-play",this.playBtn.addEventListener("click",this.playPause.bind(this)),this.playBtnImg=document.createElement("img"),this.playBtn.appendChild(this.playBtnImg),this.leftToolbar.appendChild(this.playBtn),this.settings.display.times&&(this.timeContainer=document.createElement("span"),this.timeContainer.className="cinema-times",this.elapsedTimeSpan=document.createElement("span"),this.elapsedTimeSpan.className="cinema-times-elasped",this.elapsedTimeSpan.textContent="0:00",this.timeContainer.appendChild(this.elapsedTimeSpan),this.timeSeparatorSpan=document.createElement("span"),this.timeSeparatorSpan.className="cinema-times-separator",this.timeSeparatorSpan.textContent=" / ",this.timeContainer.appendChild(this.timeSeparatorSpan),this.media.addEventListener("durationchange",this.durationUpdate.bind(this)),this.leftToolbar.appendChild(this.timeContainer)),this.settings.display.progressBar&&(this.progressBarContainer=document.createElement("div"),this.progressBarContainer.className="cinema-progress-bar-container",this.progressBarContainer.addEventListener("click",this.progressBarUpdate.bind(this)),this.container.appendChild(this.progressBarContainer),this.progressBarBuffer=document.createElement("span"),this.progressBarBuffer.className="cinema-progress-bar-buffer",this.progressBarContainer.appendChild(this.progressBarBuffer),this.progressBarInner=document.createElement("span"),this.progressBarInner.className="cinema-progress-bar-inner",this.progressBarContainer.appendChild(this.progressBarInner)),this.settings.display.volumeBar&&(this.volumeContainer=document.createElement("div"),this.volumeContainer.className="cinema-volume-container",this.settings.animate.volumeBar&&(this.volumeContainer.addEventListener("mouseover",this.volumeMouseover.bind(this)),this.volumeContainer.addEventListener("mouseout",this.volumeMouseout.bind(this))),this.rightToolbar.appendChild(this.volumeContainer),this.volumeBtn=document.createElement("button"),this.volumeBtn.className="cinema-btn cinema-btn-no-hover cinema-btn-volume",this.volumeBtnImg=document.createElement("img"),this.volumeBtnImg.src="icons/volume-high.svg",this.volumeBtn.appendChild(this.volumeBtnImg),this.volumeContainer.appendChild(this.volumeBtn),this.volumeRangeContainer=document.createElement("span"),this.volumeRangeContainer.className="cinema-volume-range",this.settings.animate.volumeBar||this.volumeRangeContainer.classList.add("cinema-volume-range-active"),this.volumeRange=document.createElement("input"),this.volumeRange.type="range",this.volumeRange.max=1,this.volumeRange.min=0,this.volumeRange.step=.1,this.volumeRange.value=this.settings.volume,this.volumeRange.addEventListener("change",this.setVolumeFromInput.bind(this)),this.volumeRangeContainer.appendChild(this.volumeRange),this.volumeContainer.appendChild(this.volumeRangeContainer)),this.settings.display.fullScreenBtn&&(this.fullScreenBtn=document.createElement("button"),this.fullScreenBtn.className="cinema-btn cinema-btn-fullscreen",this.fullScreenBtn.addEventListener("click",this.fullScreen.bind(this)),this.fullScreenBtnImg=document.createElement("img"),this.fullScreenBtnImg.src="icons/fullscreen.svg",this.fullScreenBtn.appendChild(this.fullScreenBtnImg),this.rightToolbar.appendChild(this.fullScreenBtn)),this.setVolume(this.settings.volume),this.playPause()},Cinema.prototype.playPause=function(){this.state.playing?this.pause():this.play()},Cinema.prototype.play=function(){this.media.play(),this.playBtnImg.src="icons/pause.svg",this.state.playing=!0},Cinema.prototype.pause=function(){this.media.pause(),this.playBtnImg.src="icons/play.svg",this.state.playing=!1},Cinema.prototype.mediaMouseover=function(){this.toolbar.classList.add("cinema-toolbar-active")},Cinema.prototype.mediaMouseout=function(){this.toolbar.classList.remove("cinema-toolbar-active")},Cinema.prototype.mediaPlaying=function(){if(this.settings.display.progressBar){var e=this.media.currentTime/this.media.duration*100;this.progressBarInner.style.width=e+"%"}this.settings.display.times&&(this.elapsedTimeSpan.textContent=t(this.media.currentTime))},Cinema.prototype.progressBarUpdate=function(e){this.media.currentTime=e.offsetX/this.progressBarContainer.clientWidth*this.media.duration},Cinema.prototype.bufferUpdate=function(){if(this.settings.display.progressBar)for(var e=this.media,t=0;t<e.buffered.length;t++)if(e.buffered.start(e.buffered.length-1-t)<e.currentTime){this.progressBarBuffer.style.width=e.buffered.end(e.buffered.length-1-t)/e.duration*100+"%";break}},Cinema.prototype.durationUpdate=function(){this.durationSpan=document.createElement("span"),this.durationSpan.className="cinema-times-duration",this.durationSpan.textContent=t(this.media.duration)||"Not Applicable",this.timeContainer.appendChild(this.durationSpan)},Cinema.prototype.setVolumeFromInput=function(e){var t=e.target.value;this.setVolume(t)},Cinema.prototype.setVolume=function(e){0==(this.media.volume=e)?(this.volumeBtnImg.style.width="9px",this.volumeBtnImg.src="icons/volume-mute.svg"):.6<=e?(this.volumeBtnImg.style.width="18px",this.volumeBtnImg.src="icons/volume-high.svg"):(this.volumeBtnImg.style.width="13px",this.volumeBtnImg.src="icons/volume-low.svg")},Cinema.prototype.volumeMouseover=function(){this.volumeRangeContainer.classList.add("cinema-volume-range-active")},Cinema.prototype.volumeMouseout=function(){this.volumeRangeContainer.classList.remove("cinema-volume-range-active")},Cinema.prototype.fullScreen=function(){this.state.fullScreen?this.container.classList.remove("cinema-fullscreen"):this.container.classList.add("cinema-fullscreen"),this.state.fullScreen=!this.state.fullScreen},Cinema.prototype.mediaEndUpdate=function(){this.state.playing=!1,this.playBtnImg.src="icons/replay.svg"}}();